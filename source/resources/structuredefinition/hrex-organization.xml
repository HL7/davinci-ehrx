<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition
    xmlns="http://hl7.org/fhir">
    <id value="hrex-organization"/>
    <meta>
        <versionId value="6"/>
        <lastUpdated value="2019-03-01T01:16:13.000-05:00"/>
    </meta>
    <extension url="https://trifolia-fhir.lantanagroup.com/r4/StructureDefinition/github-branch">
        <valueString value="master"/>
    </extension>
    <extension url="https://trifolia-fhir.lantanagroup.com/r4/StructureDefinition/github-path">
        <valueString value="HL7/davinci-ehrx/source/resources/structuredefinition/hrex-organization.xml"/>
    </extension>
    <url value="http://hl7.org/fhir/us/davinci-hrex/StructureDefinition/hrex-organization"/>
    <name value="HRex Organization"/>
    <status value="draft"/>
    <fhirVersion value="4.0.0"/>
    <kind value="resource"/>
    <abstract value="false"/>
    <type value="Organization"/>
    <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Organization"/>
    <derivation value="constraint"/>
    <differential>
        <element id="Organization">
            <path value="Organization"/>
            <mustSupport value="false"/>
            <isModifier value="false"/>
        </element>
        <element id="Organization.identifier">
            <path value="Organization.identifier"/>
            <slicing>
                <discriminator>
                    <type value="value"/>
                    <path value="system"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <constraint>
                <key value="dv-1"/>
                <severity value="error"/>
                <human value="If present, `Identifier.type` SHALL be 'PRN' when  `Identifier.system` = 'http://hl7.org/fhir/sid/us-npi' and 'TAX' when  `Identifier.system` = 'http://hl7.org/fhir/us/davinci-deqm/STU3/sid/us-tin'."/>
                <expression value="((type.coding.where(code = 'PRN').exists()  and system = 'http://hl7.org/fhir/sid/us-npi')  or (type.coding.where(code = 'TAX').exists()  and system = 'urn:oid:2.16.840.1.113883.4.4')) or type.empty()"/>
                <xpath value="â¦todoâ¦"/>
            </constraint>
            <mustSupport value="true"/>
            <isModifier value="false"/>
        </element>
        <element id="Organization.identifier:npi">
            <path value="Organization.identifier"/>
            <sliceName value="npi"/>
            <min value="1"/>
            <max value="1"/>
            <patternIdentifier>
                <system value="http://hl7.org/fhir/sid/us-npi"/>
            </patternIdentifier>
            <mustSupport value="true"/>
            <isModifier value="false"/>
        </element>
        <element id="Organization.identifier:npi.type">
            <path value="Organization.identifier"/>
            <sliceName value="npi"/>
            <min value="1"/>
            <max value="1"/>
            <patternCodeableConcept>
                <coding>
                    <system value="http://terminology.hl7.org/CodeSystem/v2-0203"/>
                    <code value="PRN"/>
                </coding>
            </patternCodeableConcept>
            <isModifier value="false"/>
        </element>
        <element id="Organization.identifier:tin">
            <path value="Organization.identifier"/>
            <sliceName value="tin"/>
            <min value="1"/>
            <max value="1"/>
            <patternIdentifier>
                <system value="urn:oid:2.16.840.1.113883.4.4"/>
            </patternIdentifier>
            <mustSupport value="true"/>
            <isModifier value="false"/>
        </element>
        <element id="Organization.identifier:tin.type">
            <path value="Organization.identifier"/>
            <sliceName value="npi"/>
            <min value="1"/>
            <max value="1"/>
            <patternCodeableConcept>
                <coding>
                    <system value="http://terminology.hl7.org/CodeSystem/v2-0203"/>
                    <code value="TAX"/>
                </coding>
            </patternCodeableConcept>
            <isModifier value="false"/>
        </element>
    </differential>
</StructureDefinition>